{% extends "layout/base.html" %}

{% block title %} Member {% endblock %}

{% block script %}
<script  type="text/babel">

class MainContent extends React.Component{
    
    render(){
        return(
            <div>
            <ContentTitle title="Member"/>
            <Paper>
            <MemberList/>
            </Paper>
            </div>
        );
    }
}

class MemberList  extends React.Component{

    state = {
        members: []
    };

    async componentDidMount() {
        try {
            const res = await fetch('http://127.0.0.1:8000/api/members?format=json');
            const members = await res.json();

            console.log(members);
            this.setState({
                members
            });
        } catch (e) {
            console.log(e);
        }
    }

    render(){

        return (
            <Table>
                <TableHead>
                <TableRow>
                    <TableCell>Member</TableCell>
                </TableRow>
                </TableHead>
                <TableBody>
                    {
                        this.state.members.map(n => {
                        return (
                            <TableRow key={n.id}>
                                <TableCell component="th" scope="row">
                                {n.name}
                                </TableCell>

                            </TableRow>
                            );
                        })
                    }
                </TableBody>
            </Table>

        );
    }
}

</script> 
{% endblock %}